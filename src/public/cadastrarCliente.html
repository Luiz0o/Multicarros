<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro Cliente</title>
    <link rel="stylesheet" href="../public/css/cadastrarCliente.css">
</head>
<body>
    <body class="auth-bg">
    <a href="dashboard.html" class="btn-voltar-home" title="Voltar para Home">
      <i class="fas fa-arrow-left"></i> â¬…
    </a>
    <div class="card-cadastro">
      <h2 class="card-titulo">Cadastrar Cliente ðŸ†•</h2>
      <form id="clienteForm">
        <div class="form-group">
          <label>Nome</label>
          <input type="text" id="nome" required />
        </div>
        <div class="form-group">
          <label>Telefone</label>
          <input type="tel" id="telefone" required />
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="email" required />
        </div>
        <div class="form-group">
          <label>CPF</label>
          <input type="text" id="cpf" required />
        </div>
        <div class="form-group">
          <label>Data de Nascimento</label>
          <input type="date" required />
        </div>
        <div class="form-group">
          <label>Senha</label>
          <input type="password" required />
        </div>
        <div class="form-actions">
          <button type="submit" class="btn primary">Salvar</button>
          <button type="button" class="btn ghost">Cancelar</button>
        </div>
      </form>
    </div>
    <script>
      document.getElementById('clienteForm')?.addEventListener('submit', async (e) => {
        e.preventDefault();
        const payload = {
          nome: document.getElementById('nome')?.value.trim(),
          email: document.getElementById('email')?.value.trim(),
          telefone: document.getElementById('telefone')?.value.trim(),
          cpf: document.getElementById('cpf')?.value.trim(),
          carro: document.getElementById('carro')?.value.trim()
        };

        try {
          const res = await fetch('/clientes', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          const body = await res.json();
          if (res.ok) {
            alert('Cliente cadastrado com sucesso');
            // atualizar UI / redirecionar
          } else {
            alert('Erro: ' + (body?.message || JSON.stringify(body)));
          }
        } catch (err) {
          console.error(err);
          alert('Erro de conexÃ£o com o servidor');
        }
      });
    </script>
</body>
</html>